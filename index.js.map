{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const getPhoto = async function (dataName, currentPage) {\n  const data = await axios.get('', {\n    params: {\n      key: '49375112-dd0d1364feb3efc0ffe9630b6',\n      q: dataName,\n      page: currentPage,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return data;\n};\n","import SimpleLightbox from 'simplelightbox';\n\nexport const createGalleryMarkup = function ({\n  webformatURL: smallIMG,\n  largeImageURL: largeIMG,\n  tags: alt,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeIMG}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${smallIMG}\"\n        alt=\"${alt}\"\n      />\n    </a>\n   \n    <ul class = \"description-list\">\n        <li class=\"description\"><span>Likes</span> ${likes}</li>\n        <li class=\"description\"><span>Views</span> ${views}</li>\n        <li class=\"description\"><span>Comments</span> ${comments}</li>\n        <li class=\"description\"><span>Downloads</span> ${downloads}</li>\n        </ul>\n      \n  </li>`;\n};\n\nexport const createLightBox = function () {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n  lightbox.refresh();\n};\n","import iziToast from 'izitoast';\nimport { getPhoto } from './js/pixabay-api';\nimport { createGalleryMarkup, createLightBox } from './js/render-functions';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  backdrop: document.querySelector('.backdrop'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};\nlet page = 1;\nlet dataName = '';\nlet totalPages = 0;\n\nconst showLoader = () => {\n  refs.backdrop.classList.remove('is-hidden');\n};\n\nconst hideLoader = () => {\n  refs.backdrop.classList.add('is-hidden');\n};\n\nconst onScrollPage = () => {\n  const card = refs.gallery.firstElementChild;\n  if (card) {\n    const { height: cardHeight } = card.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n};\n\nconst searchInput = async function (event) {\n  event.preventDefault();\n  dataName = event.currentTarget.elements['search-text'].value.trim();\n\n  if (dataName === '') {\n    alert('Please enter a valid data');\n    return;\n  }\n\n  showLoader();\n\n  page = 1;\n  try {\n    const { data } = await getPhoto(dataName, page);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        messageColor: '#fff',\n        close: false,\n        icon: 'x',\n        iconText: 'x',\n        iconColor: '#fff',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        timeout: 10000,\n      });\n\n      refs.gallery.innerHTML = '';\n      refs.loadMoreBtn.classList.add('is-hidden')\n      return;\n    }\n\n\n    const galleryTemplate = data.hits\n      .map(img => createGalleryMarkup(img))\n      .join('');\n\n    refs.gallery.innerHTML = galleryTemplate;\n\n    if (data.totalHits > 15) {\n      refs.loadMoreBtn.classList.remove('is-hidden');\n      refs.loadMoreBtn.addEventListener('click', onLoadMoreButton);\n    } else {\n      refs.loadMoreBtn.classList.add('is-hidden');\n      refs.loadMoreBtn.removeEventListener('click', onLoadMoreButton);\n    }\n\n    createLightBox();\n    refs.form.reset();\n  } catch (error) {\n    iziToast.error({\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      message: 'Oops! Something went wrong. Please try again later.',\n      timeout: 10000,\n    });\n    refs.gallery.innerHTML = '';\n  } finally {\n    hideLoader();\n    refs.form.reset();\n  }\n};\n\nconst onLoadMoreButton = async event => {\n  try {\n    page++;\n\n    showLoader();\n    const { data } = await getPhoto(dataName, page);\n\n    const galleryTemplate = data.hits\n      .map(img => createGalleryMarkup(img))\n      .join('');\n    refs.gallery.insertAdjacentHTML('beforeend', galleryTemplate)\n    createLightBox();\n    onScrollPage();\n    if (page * 15 >= data.totalHits) {\n      refs.loadMoreBtn.classList.add('is-hidden');\n      refs.loadMoreBtn.removeEventListener('click', onLoadMoreButton);\n      iziToast.show({\n        messageColor: '#ffffff',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: '#6C8CFF',\n        timeout: 5000,\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      messageColor: '#ffffff',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      message: 'Oops! Something went wrong. Please try again later.',\n      timeout: 10000,\n    });\n  } finally {\n    hideLoader();\n  }\n};\n\nrefs.form.addEventListener('submit', searchInput);\n"],"names":["axios","getPhoto","dataName","currentPage","createGalleryMarkup","smallIMG","largeIMG","alt","likes","views","comments","downloads","createLightBox","SimpleLightbox","refs","page","showLoader","hideLoader","onScrollPage","card","cardHeight","searchInput","event","data","iziToast","galleryTemplate","img","onLoadMoreButton"],"mappings":"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"}